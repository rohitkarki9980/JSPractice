<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

    <form onsubmit="return form_validation()">
        <table>
            <tr>
                <td>
                    <label for="name">Name</label>
                </td>
                <td>
                    <input type="text" id="name">
                </td>
                <td>
                    <span id="name_msg"></span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="age">Age</label>
                </td>
                <td>
                    <input type="text" id="age">
                </td>
                <td>
                    <span id="age_msg"></span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="phone">Phone</label>
                </td>
                <td>
                    <input type="text" id="phone">
                </td>
                <td>
                    <span id="phone_msg"></span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="email">Email</label>
                </td>
                <td>
                    <input type="text" id="email" tabindex="3">
                </td>
                <td>
                    <span id="email_msg"></span>
                </td>
            </tr>
            <tr>
                <td>
                    <label for="pwd">Password</label>
                </td>
                <td>
                    <input type="text" id="pwd">
                </td>
                <td>
                    <span id="pwd_msg"></span>
                </td>
            </tr>
            <tr>
                <td colspan="3" style="text-align: center;">
                    <button id="btn">Submit</button>
                </td>
            </tr>
        </table>
    </form>

    <script>
        let nameInput = document.getElementById('name')
        let ageInput = document.getElementById('age')
        let phoneInput = document.getElementById('phone')
        let emailInput = document.getElementById('email')
        let pwdInput = document.getElementById('pwd')
        let name_msg = document.getElementById('name_msg')
        let age_msg = document.getElementById('age_msg')
        let phone_msg = document.getElementById('phone_msg')
        let email_msg = document.getElementById('email_msg')
        let pwd_msg = document.getElementById('pwd_msg')
        let btn = document.getElementById('btn')
        
        const display_msg = (id, msg, color) => {
            id.innerHTML = msg
            id.style.color = color
        }

        const name_validation = () => {
            let name = nameInput.value
            if (!name.match(/^[a-zA-Z]+$/)) {
                display_msg(name_msg, "Name must be only alphabets", "red")
                return false
            }
            else if (!name.match(/^.{3,30}$/)) {
                // else if(name.length<3 || name.length>30){
                display_msg(name_msg, "Name must be at least 3 and at most 30 characters", "red")
                return false
            }
            else {
                display_msg(name_msg, "Valid name", "green")
                return true
            }
        }

        const phone_validation = () => {
            let phone = phoneInput.value
            if (!phone.match(/^[+][1-9]{1,3}[\-]((98)|(97)|(96)|(95))[0-9]{8}$/)) {
                display_msg(phone_msg, "Invalid phone number", "red")
                return false
            }
            else {
                display_msg(phone_msg, "Valid phone number", "green")
                return true
            }
        }

        const email_validation = () => {
            let email = emailInput.value
            if (!email.match(/^[a-zA-Z][a-zA-Z0-9_.]+[@](gmail)[.](com)$/)) {
                display_msg(email_msg, "INVALID EMAIL", "red")
                return false
            }
            else {
                display_msg(email_msg, "VALID EMAIL", "green")
                return true
            }
        }

        const password_validation = () => {
            let pwd = pwdInput.value
            if (!pwd.match(/[a-z]/)) {
                display_msg(pwd_msg, "Password must contain at least one lowercase alphabet", "red")
                return false
            }
            else if (!pwd.match(/[A-Z]/)) {
                display_msg(pwd_msg, "Password must contain at least one uppercase alphabet", "red")
                return false
            }
            else if (!pwd.match(/[0-9]/)) {
                display_msg(pwd_msg, "Password must contain at least one number", "red")
                return false
            }
            else if (!pwd.match(/[+*/!@#$%^\\\-]/)) {
                display_msg(pwd_msg, "Password must contain at least one special character", "red")
                return false
            }
            else if (!pwd.match(/^.{8,30}$/)) {
                display_msg(pwd_msg, "Password must be at least 8 characters, and at most 30 characters", "red")
                return false
            }
            else {
                display_msg(pwd_msg, "Valid Password", "green")
                return true
            }

        }

        const form_validation = () => {
            if(name_validation() && phone_validation() && email_validation() && password_validation()){
                return true
            }
            else{
                return false
            }
        }

        nameInput.addEventListener('keyup', name_validation)
        phoneInput.addEventListener('keyup', phone_validation)
        emailInput.addEventListener('keyup', email_validation)
        pwdInput.addEventListener("keyup", password_validation)

    </script>
</body>

</html>